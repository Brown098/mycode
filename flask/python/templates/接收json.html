<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>获取API数据</title>
</head>

<body>


    <div>
        <h3 class="text-sm font-medium text-gray-500">CPU使用率</h3>
        <p class="text-3xl font-bold" id="cpu-value">0%</p>
    </div>
    <div>
        <h3 class="text-sm font-medium text-gray-500">CPU使用率</h3>
        <p class="text-3xl font-bold" id="memory-value">0%</p>
    </div>
    <div>
        <h3 class="text-sm font-medium text-gray-500">CPU使用率</h3>
        <p class="text-3xl font-bold" id="disk-value">0%</p>
    </div>
    <div>
        <h3 class="text-sm font-medium text-gray-500">CPU使用率</h3>
        <p class="text-3xl font-bold" id="memory-bar">0%</p>
    </div>
    <div>
        <h3 class="text-sm font-medium text-gray-500">页脚时间</h3>
        <p class="text-3xl font-bold" id="update-time">0%</p>
    </div>
    <div>
        <h3 class="text-sm font-medium text-gray-500">接收网速</h3>
        <p class="text-3xl font-bold" id="bytes_recv">0%</p>
    </div>

    <script>
        async function fetchData() {
            try {
                // 发送请求到后端API
                const response = await fetch("http://216.144.235.169:6090/metrics");
                // 检查响应是否成功
                if (!response.ok) {
                    throw new Error(`HTTP错误，状态码: ${response.status}`);
                }
                // 解析JSON数据
                const data = await response.json();
                document.getElementById('cpu-value').textContent = `${data.cpu_percent.toFixed(1)}%`;
                document.getElementById('memory-value').textContent = `${data.memory_percent.toFixed(1)}%`;
                document.getElementById('disk-value').textContent = `${data.disk_percent.toFixed(1)}%`;
                document.getElementById('update-time').textContent = data.timestamp;
                document.getElementById('bytes_recv').style.width = `${data.bytes_recv}%`;
                console.log(data)
            }
            catch (err) {
                // 显示错误信息
                console.error('获取数据失败:', err);
            }
        }
        fetchData();
        const refreshInterval = setInterval(fetchData, 2000);//定时刷新函数
    </script>
</body>

</html>